/*******************************************************
* Copyright (c) 2013 Rice University
*  This software is subject to the provisions of the GNU AFFERO GENERAL PUBLIC LICENSE Version 3.0 (AGPL).
*  See LICENSE.txt for details.
*******************************************************/

 /* Styles used when generating a PDF from xhtml+css
 ***************************************************/

// Import general page headers/footers, bookmark calculation, etc
@import url('ccap-base.less');
@import url('ccap-numbering.less');

// Import derived base book for override
@import url('ccap-precalculus.less');

// Import for page-breaking debugger
@import url('debug-page-break.less');

// Color palette for economics
@dark-blue:     #3767B1;
@medium-blue:   #83C6EE;
@light-blue:    #CFE1F1; 
@gray:          #EFEFEF;  

// A mixture of serif and sans-serif fonts.
@font-family-sans-serif: Arial, sans-serif, @stix-fonts;
@font-family-serif: Times New Roman, serif, @stix-fonts;

@page-width: 6in;
@page { margin: 0.5in 1in; }
// Finished printed size of the QR code is dependent on: 1-distance between qr code and scanning device
// 2-size of dots in the code(amount of data inputed into the code, the smaller the dots become)
// For most smartphones the relationship between scan distance and minimum QR code size is approximately 10:1 so a 2.5cm (1 inch)
@qr: 1.25in;


/******************************************************
 * Economics Custom elements
 *
 * Most of the customizations are
 * `.note` elements with specific classes
 *
 ******************************************************/


/* -------------------------
 * Note Features for Text
 * -------------------------
 */

.note {
  &.economics {
    // Bring It Home Feature
    &.bringhome {
      page-break-inside: auto;
      .x-feature(black, @gray, bring, 0.48in); 
    }
    // Clear It Up Feature
    &.clearup {
      page-break-inside: auto;
      .x-feature(black, @gray, clear, 0.53in); 
    }
    // Work It Out Feature
    &.workout {
      page-break-inside: auto;
      .x-feature(black, @gray, work, 0.38in); 

      // weblinks included in media list need to be orange and bold
      .itemizedlist > .listitem {
        color: @orange;
        font-weight: bold;
      }

      // Supress the extra url generated from base that is wrapped with parentheses
      .itemizedlist > .listitem .link.only-show-once { 
        content: content();
      }
    }
    // Link It Up Feature
    &.linkup {
      page-break-inside: auto;
      .x-feature(black, @gray, link, 0.38in); 

      img {   //center qr code
        display: block;
        margin: auto;
      }

      .link { 
        color: @dark-blue;
        font-weight: normal;
      }
    }
    // Manual Chapter Objectives Note Utilized as Introduction Header as well in Economics
    &.chapter-objectives {
      background-color: white;
      padding: 0;
      margin: 0;

      > .title {
        font-size: x-large;
        color: @dark-blue;
        border: none;
      }
    }
  }
}
 // End of .economics notes

/* -------------------------
 * Legacy .x-feature function from Anatomy text used due to identical features parameterization
 * -------------------------
 */

.x-feature (@color, @bg-color, @svg, @padding-top) {
  color: @color;
  font-family: @font-family;

  p:nth-of-type(2) {
    page-break-before: avoid;
  }
  &::before {
    padding-top: @padding-top; //from the SVG files
    background-repeat: no-repeat;
    page-break-inside: avoid;
    page-break-after: avoid;
    background-color: white;
    content: "";
    display: block;
    // the following are tweaked so the overlays really do over lay
    margin-left: -1em;
    margin-right: -1em;
    margin-top: -0.05in;
  }

  background-color: @bg-color;
  &::before { background-image: url("ccap-economics/@{svg}.svg"); }

  > .title {
    font-size: large;
    margin-top: .6em;
    margin-bottom: .2em;
    color: black;
    border: none;
  }  

  > .body > p { font-family: @font-family; } 
}


/* -------------------------
 * Preface
 * -------------------------
 */
.preface {
  > .titlepage {
    h1.title { background-color: @dark-blue; }
  }
}

/* -------------------------
 * Book Table of Contents
 * -------------------------
 */
.book > .toc {
  > .title {
    border-bottom-color: @dark-blue;
    color: @dark-blue;
  }

  a { color: @dark-blue; }
}

/* ----------------------------------------------
 * Chapter Introduction & Learning Objectives
 * ----------------------------------------------
 */

// We can turn off the autogenerated title and utilize chapter-objectives note class
// to stand it as Introduction header to allow specialized content above header
.chapter > .introduction > .title { content: ""; }

/* -------------------------
 * Section Level Learning Objectives
* -------------------------
*/

// This must be turned off from PreCalculus since Economics 
// doesn't use section level learning objectives, only Chapter level
.section > .titlepage {
  .abstract { display: none; }
}

/* -------------------------
 * Generic Elements
 * -------------------------
 */

.chapter h1.title {
  margin-top: 0;
  padding-top: 0;
  font-size: 34pt; 
  color: @dark-blue;

  // Chapter number
  .cnx-gentext-n {
    color: @dark-blue;
  }
}

h2, h3, h4, h5, h6 {
  color: @dark-blue;
}

// Module title
h2 {
  .cnx-gentext-n { color: @dark-blue; }

  &::before { color: @dark-blue; }
}

a { 
  font-family: @font-family-sans-serif;
  font-weight: bold; 
  color: @dark-blue;
}

blockquote {
  font-family: @font-family-serif;
  color: black;
  font-size: inherit;
  margin-top: inherit;
  margin-bottom: inherit;

  &::before, &::after {
    content: "";
  }
}

/*----------------------
 * Misc Color changes
 *----------------------
 */

//These should just be replacing @color1 with @color2

.target-figure {
  font-family: @font-family-sans-serif;
  color: @dark-blue;
}

.target-table {
  font-family: @font-family-sans-serif;
  color: @dark-blue;
  font-weight: bold;
}



/* -------------------------
 * Tables
 * -------------------------
 */

.table table {
  width: 100%;
  border-left: 0 !important;
  border-right: 0 !important;
  border-top: 2px solid @dark-blue !important; // !important used to override inline-style...

  caption,
  caption span,
  caption::before,
  caption span.table-caption.caption {
    // font added here so down cascade table captions will render well inside eoc question sections
    font-family: @font-family-sans-serif;
    color: @dark-blue;
    font-weight: 700 !important; // !important used in ccap-precalculus.
  }

  thead {
    th {
      // font designation added so down the cascade tables in self-check questions, and other eoc sections will be sans-serif headings
      font-family: @font-family-sans-serif;
      // autogenerated inline styles are laced with !important, so for economics
      // design we need no right border on table head and also text centered.
      border-right: 0 !important;
      text-align: center !important;

      background-color: @light-blue;
      border-bottom: 2px solid @dark-blue !important; //!important used in ccap-precalculus.
    }
  }
}



/* -------------------------
 * Figure/Subfigures
 * -------------------------
 */

.figure {
  >.title { color: @dark-blue; }
}



/* -------------------------
 * Chapter Introduction
 * -------------------------
 */
.chapter > .introduction {
  > .toc a {
    color: @dark-blue;
  }

/******************************************************************************
 * Styling for Chapter Outline Box
 ******************************************************************************/

  >.toc { 
   display: none; 
  }
}


/******************************************************************************
 * EOC Styling
 ******************************************************************************/

// Key Terms
.glossary > .titlepage h2.title {
  color: @dark-blue;
}
.glossary {
  > .titlepage h2.title {
    font: normal normal 700 13pt/1em @font-family-sans-serif;
  }

  > dl dt {
    font: normal normal 700 10pt/1em @font-family-sans-serif;
  }
  > dl dd {
    font: normal normal 400 10pt/12pt @font-family-serif;
  }
}
.glossary {
  // Hide "Chapter x Review" title.
  > .titlepage h2.title::before {
    display: none !important; // !important is used in ccap-precalculus.
  }

  > dl {
    margin: 0;

    > dt, > dd {
      padding-top: 1em;
    }
  }
}

.cnx-eoc {
  &.summary,
  &.self-check-questions,
  &.review-questions,
  &.critical-thinking,
  &.problems {
    > .title {
      color: @dark-blue !important; // !important used in ccap-precalculus.
    }
    > .section > .title > a {
      color: @dark-blue;
    }
  }
}
.cnx-eoc {
  > .title {
    font: normal normal 700 13pt/1em @font-family-sans-serif;
  }
  > .section {
    > .title {
      font: normal normal 700 10pt/1em @font-family-sans-serif;
    }
    > .body {
      font: normal normal 400 10pt/12pt @font-family-serif;
    }
  }
}
.cnx-eoc {
  .title {
    margin-top: 1em;
    column-span: all;
  }
  > .section > .title {
    display: none;
  }
  > .section.empty {
    display: none; // Get rid of extra spacing from padding
  }

// Key Concepts & Summary
  &.summary {
    > .title {
      content: "Key Concepts and Summary";
      text-transform: uppercase;
    }

    > .section > .title {
      display: block;
    }
  }

// Self-Check Questions
  &.self-check-questions {
    column-count: 1;
  }
// Review Questions

// Critical Thinking Questions

// Problems

// Hide EOC Solutions
  &.cnx-solutions {
    display: none;
  }
// Hide EOC References
  &.references {
    display: none;
  }
}

/******************************************************************************
 * EOB Styling
 ******************************************************************************/

// This equation block below comes from PreCalculus which required equation numbering
// in it's design. Just changing color from orange (precalc) to @dark-blue for 
// aesthetics until we hear from W&N whether or not they want equation numbering
// in Economics.  If not, we can turn off the numbering below.

/* ---------------------------------------------------
 * Equations
 * ---------------------------------------------------
 */
// Turn off equation hiding for pre-calculus text
div.book,
div.book > div.part {
  > div.preface,
  > div.chapter,
  > div.appendix {
    > div.section div.equation > *:last-child::after {
      font-family: @font-family-sans-serif;
      color: @dark-blue;
      font-weight: bold;
    }
  }
}

// Key Terms section counter adjustment. From Precalculus
// remove (-1) designation to make sure reset begins at 1.1 instead of 1.0
.x-duplicate-hierarchy() {
  > div.cnx-eoc { counter-reset: /*exercise*/ eoc-section; }
 }

// References
div.colophon.end-of-book-references .chapter-area {
  .body .section-area .title {
    display: none; // Do not display section titles.
  }

  > .title {
    color: @black;
  }
}

// Answer Key
div.colophon.end-of-book-solutions div.chapter-area {
  div.solution {
    padding-bottom: .2em;
    > div.title a.solution {
      padding-right: .2em;

      &::before {
        content: target-counter(attr(href), exercise) ".";
      }
    }

    &:nth-of-type(1) {
      padding-top: .5em;
    }
  }
}

// Titles
.end-of-book-references,
.end-of-book-solutions {
  h1.title {
    color: @dark-blue;
  }
}
div.index div.title h2 {
  color: @dark-blue;
}


