// Copyright (c) 2013 Rice University
// This software is subject to the provisions of the GNU AFFERO GENERAL PUBLIC LICENSE Version 3.0 (AGPL).
// See LICENSE.txt for details.

.chapter .note {
  &.my-story {
    #content>#note>.style('my-story'; chapter);
  }
  &.defining-american  {
    #content>#note>.style('defining-american'; chapter);
  }
  &.americana {
    #content>#note>.style('americana'; chapter);
  }
  &.click-and-explore {
    #content>#note>.style('click-and-explore'; chapter);
  }
}

// History end of chapter skeleton parts
.cnx-eoc {
  // For history summary it is wished for sections to be displayed
  &.summary {
    > .section .title {
      #part>#chapter-end>#summary>#title>.subtitle();
    }

    p:nth-of-type(1) {  
      #part>#chapter-end>#summary>.style();
    }
  }
}

div.end-of-book-solutions {
  > h1.title {
    #part>#book-end>#end-of-book-solutions>#title>.style();
  }
}

.index {
  > .title h2 {
    #part>#book-end>#index>#title>.style();
  }
  .index-term a { 
    #part>#book-end>#index>.link();
  }
}

// Style figures and captions
.figure {
  > .title {
    #content>#figure>#title>.style();
  }
  > .caption {
    #content>#figure>.caption();
  }
  &.timeline {  
    #content>#figure>.style('timeline'; any);
  }
}

// We most likely do not need to target these in a skeleton
// change but through @part somehow. There's lots of different
// permutations: .chapter h1.title, .section h3.title, etc. etc.
.section h3 {
  #content>#heading>.style(h3;);
}
.section h4 {
  #content>#heading>.style();
}

div.book div.chapter div.titlepage > div > div > h2.title {
  #part>.title(chapter);
}

.chapter > .introduction > h3.title,
div.book div.chapter div.titlepage > div > div > h2.title,
div.book div.chapter div.titlepage > div > div > h2 {
  #content>#heading>.style();
}


// temporary bugfix, remove these along with all #content>#heading.
.chapter > .introduction > h3.title {
  #part>#introduction>#title>.style();
}
.chapter h2 {  #content>#heading>.style(h2, chapter) !important; }



.preface .section > .table, 
.preface .section > .table table { 
  #content>#table>.style(any; preface);
}