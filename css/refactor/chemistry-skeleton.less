// Copyright (c) 2013 Rice University
// This software is subject to the provisions of the GNU AFFERO GENERAL PUBLIC LICENSE Version 3.0 (AGPL).
// See LICENSE.txt for details.


// Would #content>#note>#title>.style('sciences-interconnect'; any); work?
#book.attribution, .colophon { font-size: initial; }
.chapter .note {
  &.sciences-interconnect {
    #content>#note>.style('sciences-interconnect'; any);
    >.title {
      #content>#note>#title>.style('sciences-interconnect'; any);
    }
  }
  &.everyday-life {
    #content>#note>.style('everyday-life'; any);
    >.title {
      #content>#note>#title>.style('everyday-life'; any);
    }
  }
  &.chemist-portrait {
    #content>#note>.style('chemist-portrait'; any);
    >.title {
       #content>#note>#title>.style('chemist-portrait'; any);
    }
  }
  &.link-to-learning {
    #content>#note>.style('link-to-learning'; any);
    p {
      padding-left:107px;
    }
  }
}


/******************************************************
 * Preface
 ******************************************************/

 // We will need to convert this to slot in other books
.preface {
  > .section h2,
  > .section h3 {
    color: @dark-blue;
  }
}


/******************************************************
 * Chapter Outline
 ******************************************************/

// Do we have a slot to target the actual li entries for .toc-section?
// Not really sure where this should live?  The margin entries are attached to li.toc-section
.chapter > .introduction > .toc > * > li {
    margin: .4em 0;
}


/******************************************************
 * Example
 ******************************************************/

// No slot for this in precalculus. For Chemistry, example titles need to be boldish
.example > .title > * {
  font-weight: 700;
}

.example > .body {
  > div.title {
    #content>#paragraph>#title>.style(any; any; example);
  }
  > div.title:first-of-type {
    #content>#paragraph>#title>.style('primary'; any; example);
  }
  div.note {
    #content>#note>.style('answer'; any; example);

    div.title { #content>#note>#title>.style('answer'; any; example); }
    div.body, div.body p { #content>#note>#body>.style('answer'; any; example); }
  }
}

/******************************************************
 * Step lists
 ******************************************************/
div.stepwise {
  ol { #content>#list>.style('step-list'; any); }
  ol li {
    #content>#list>.item('step-list'; any); 

    p:first-of-type { display: inline; }
  }
  ol li::before { #content>#list>.number('step-list'; any); }
}

// Using this long selector to override the use of '*' in numbering base...
div.book div.chapter > div.section div.example div.exercise div.step-list ul li {
  #content>#list>.item('step-list'; any);
}

/******************************************************
 * List inside of a list
 ******************************************************/
 div.orderedlist div.itemizedlist ul {
  #content>#list>.style(any; any; list);
 }

/******************************************************
 * Ad-hoc text emphasis classes.
 * For now we have one red, and one green class.
 ******************************************************/
span.emphasis-one strong {
  font-weight: inherit;
  color: @red;
}
span.emphasis-two strong {
  font-weight: inherit;
  color: @green;
}
span.emphasis-leading-indent strong { content: "\00a0" content(); }

/******************************************************
 * Tables
 ******************************************************/

.table {
  > table > caption + tbody > tr:first-child > td.tablecell {
    border-top:1px solid @dark-blue;
  }
  &.column-header tbody td:first-child  {
    #content>#table>#data>.style('header'; any);
  }
  &:not(.no-title) table {
    tr:first-child > th:first-child  {
      #content>#table>#header>.style('first'; any);
    }
  }
    table .table-caption.caption {
      color: @black;
      font-weight: normal !important; //override strong tag
      font-family: @font-family-sans-serif;
      font-size: 9pt;
    }
  }

/******************************************************
 * EOC Customizations
 ******************************************************/
.cnx-eoc {
  &.exercises {
    #part>#chapter-end>#exercises>.style();
    > .title { #part>#chapter-end>#exercises>#title>.style(); }
    p {
      text-align: left; //W&N does not want Review Questions justified.
    }
    > .section > .title > a { #part>#chapter-end>#exercises>#title>.link(); }
    > .section > .body > .exercise { #content>#exercise>.style(any; any; exercises; chapter-end); }
  }
}
.cnx-eoc .section .title { padding-top: 0; }

// This section not completely refactored in PreCalc yet.  Everything across
// books will need to go into #chapter-ara slot
div.colophon.end-of-book-solutions .chapter-area {
  #part>#book-end>#end-of-book-solutions>#chapter-area>.style(any);
  // Solution child selector override from PreCalc
  div.solution {
    #content>#solution>.style(@kind; book-end);
      div.itemizedlist, div.orderedlist {
    ul, ol {
      #content>#list>.style(any; end-of-book-solutions; solution);
    }
  }
  }
}

/******************************************************
 * Appendix
 ******************************************************/

// Styling for customized Appendix
div.appendix  {
  div.titlepage > div > div h1.title {
    #part>#appendix>#title>.style();
     span.cnx-gentext-n {
      &::before {
        content: "Appendix ";
      }
      #part>#appendix>#title>.number();
     }

    span.cnx-gentext-t {
    &::before {
      #part>#appendix>#title>.divider();
    }
   #part>#appendix>#title>.text();
  }

    span.cnx-gentext-autogenerated {
      #part>#appendix>#title>.label();
    }
  }


  div.section>div.titlepage > div > div h2 {
     &::before {
      #part>#appendix>#section>#title>.number();
    }
    #part>#appendix>#section>#title>.style();
    span.cnx-gentext-n {
      display: none;
    }
    span.cnx-gentext-t {
      #part>#appendix>#section>#title>.text();
      &::before {
        #part>#appendix>#section>#title>.divider();
      }
    }
    span.cnx-gentext-autogenerated {
      #part>#appendix>#section>#title>.label();
    }
  }
}

/********************************************************************
 * Glossary
 ********************************************************************/
.glossary {
  #content>#glossary>.style(any; chapter);

  .title {
    #content>#glossary>#title>.style(any; chapter);
  }

  // Remove terms indentation
  dl { #content>#glossary>.dl(any; chapter); }

  // Term/definition divider, eg ":"
  dl dt::after { #content>#glossary>.divider(any; chapter); }

  dl dt { #content>#glossary>.term(any; chapter); }

  dl dd { #content>#glossary>.definition(any; chapter); }
}

/********************************************************************
 * Ad-hoc numbering
 ********************************************************************/

// Disable numbering for equations in EOB solutions and in an appendix.
div.colophon.end-of-book-solutions .chapter-area div.solution > div.body div span.label,
div.book > div.appendix > div.section div.equation > *:last-child::after {
  display: none;
}