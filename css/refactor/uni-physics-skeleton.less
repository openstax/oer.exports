// Copyright (c) 2014 Rice University
// This software is subject to the provisions of the GNU AFFERO GENERAL PUBLIC LICENSE Version 3.0 (AGPL).
// See LICENSE.txt for details.

.section > .titlepage {
  .abstract {
    .itemizedlist {
      .listitem {
        #part>#chapter>#learning-objectives>#listitem>.style();
        &::before {
          #part>#chapter>#learning-objectives>#before>.style();
        }
      }
    }
  }
}

div.example {
  > div.body {
    > div.mediaobject {
      #content>#media-object>.style(any; example);
      > img {
        #content>#image>.style(any; example);
      }
    }
    > div.orderedlist > ol.orderedlist > li.listitem > div.mediaobject {
      #content>#media-object>.style('list-item'; example);
      > img {
        #content>#image>.style('list-item'; example);
      }
    }
  }
}

.note {
  &.equation-callout {
    @context: equation-callout;
    #content>#note>.style(equation-callout);
      > .title {
        #content>#note>#title>.style(@kind; @part; @context);
    }
  }
  &.check-understanding {
    #content>#note>.style(check-understanding);
  }
}

.cnx-svg {
  svg {
    max-width: 6.5in;
  }
}

.cnx-eoc {
  &.review-challenge,
  &.review-additional-problems {
    & > div.section > div.title {
      display: none;
    }
  }
}

div.table {
  div.caption {
    #content>#table>#caption>.style()
  }
}

// Check your understanding solutions
div.colophon.end-of-book-solutions .chapter-area {
  > div.check-understanding {
    &::before {
      #part>#book-end>#end-of-book-solutions>#title>.style(check-understanding);
    }
    div.solution > div.title a.solution::before {
      content: target-counter(attr(href), chapter) "." target-counter(attr(href), check-understanding);
    }
  }
  > div.review-conceptual-questions {
    &::before {
      #part>#book-end>#end-of-book-solutions>#title>.style(review-conceptual-questions);
    }
  }
  > div.review-problems {
    &::before {
      #part>#book-end>#end-of-book-solutions>#title>.style(review-problems);
    }
  }
  > div.review-additional-problems {
    &::before {
      #part>#book-end>#end-of-book-solutions>#title>.style(additional-problems);
    }
  }
  > div.review-challenge {
    &::before {
      #part>#book-end>#end-of-book-solutions>#title>.style(review-challenge);
    }
  }
}


// Numbering
div.book div.chapter .check-understanding:not(.labeled) {
  counter-increment: check-understanding;
}
div.book div.chapter .check-understanding > .title:not(.labeled)::before {
  content: "" counter(chapter, decimal) "." counter(check-understanding) " "
}

// EOC Review
div.book > div.part > div.chapter,
div.book > div.chapter {
  .cnx-eoc > .title {
    #part>#chapter-end>#title>.style('chapter-review'; chapter);
    > span {
      #part>#chapter-end>#title>.style('chapter-review'; chapter; title);
    }
  }
  .cnx-eoc .section > .title {
    #part>#chapter-end>#title>.style('chapter-review'; chapter; section; title);
  }
}
